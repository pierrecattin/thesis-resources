{
    "collab_server" : "",
    "contents" : "#' Compute Price Direction\n#' Computes a variable describing the direction of future price changes\n#'\n#' @param prices xts where one numeric column has to be called \"close\"\n#' @param daily.start which observation number should be the first one for which the variable is computed each day; numeric\n#' @param horizon prediction horizon; numeric\n#' @param min.return  minimum absolute return in horizon to be classified as -1 or +1; default=0; numeric\n#'\n#' @return xts with one numeric (values -1, 0, +1, NA) column and same indices as prices. last 'horizon' values of each day are NA\n#' @export\n#'\ncompute.price.direction <- function (prices, daily.start, horizon, min.return=0){\n  all.days <- as.Date(time(prices))\n  days <- unique(all.days)\n\n  y <- prices$Close\n  colnames(y)<-\"movement\"\n  y$movement <- NA\n\n  n.obs.daily <- sum(all.days==all.days[1])\n  # d <- days[1]\n  pb.mov <- tkProgressBar(title = \"Computing y-Variable\", min = 0,\n                          max = length(days), width = 300)\n  for (d in days){\n    day.num <- which(days==d) # only for pb\n    setTkProgressBar(pb.mov, day.num, label=paste0(day.num, \"/\", length(days), \" days computed\"))\n    closes <- prices[all.days==d,]$Close\n    if (nrow(closes) != n.obs.daily){\n      warning(paste0(\"The number of observations on the \", d,\" is different from the other days. This day will be ignored\"))\n    } else{\n      future.closes <- c(rep(NA, daily.start-1),\n                         as.numeric(closes[(daily.start+horizon):nrow(closes),]),\n                         rep(NA, horizon))\n      up <- 1*(future.closes>=closes*(1+min.return))\n      down <- 1*(future.closes<closes*(1-min.return))\n      y$movement[all.days==d,] <- up - down\n    }\n  }\n  close(pb.mov)\n  return(y)\n}\n",
    "created" : 1523627920685.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "304937424",
    "id" : "E5B459CE",
    "lastKnownWriteTime" : 1524509809,
    "last_content_update" : 1524509809940,
    "path" : "C:/Users/catti/Google Drive/Thesis/data_analysis/packages/thesis.resources/R/compute.prices.direction.R",
    "project_path" : "R/compute.prices.direction.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}